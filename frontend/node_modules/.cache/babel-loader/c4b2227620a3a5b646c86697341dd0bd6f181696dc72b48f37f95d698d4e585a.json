{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{ChevronDownIcon,SearchIcon}from'@heroicons/react/outline';import{countries,getCountryByCode,getCountryByName}from'../../data/countries';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const CountrySelect=_ref=>{let{value,onChange,placeholder=\"Select a country...\",className=\"\",disabled=false,error=false}=_ref;const[isOpen,setIsOpen]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[filteredCountries,setFilteredCountries]=useState(countries);const dropdownRef=useRef(null);const searchInputRef=useRef(null);const selectedCountry=value?getCountryByName(value):null;// Filter countries based on search term\nuseEffect(()=>{if(searchTerm.trim()===''){setFilteredCountries(countries);}else{const filtered=countries.filter(country=>country.name.toLowerCase().includes(searchTerm.toLowerCase())||country.code.toLowerCase().includes(searchTerm.toLowerCase()));setFilteredCountries(filtered);}},[searchTerm]);// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setIsOpen(false);setSearchTerm('');}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);// Focus search input when dropdown opens\nuseEffect(()=>{if(isOpen&&searchInputRef.current){searchInputRef.current.focus();}},[isOpen]);const handleToggle=()=>{if(!disabled){setIsOpen(!isOpen);setSearchTerm('');}};const handleSelect=country=>{onChange(country.name);setIsOpen(false);setSearchTerm('');};const handleKeyDown=event=>{if(event.key==='Enter'){event.preventDefault();if(filteredCountries.length>0){handleSelect(filteredCountries[0]);}}else if(event.key==='Escape'){setIsOpen(false);setSearchTerm('');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative \".concat(className),ref:dropdownRef,children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleToggle,disabled:disabled,className:\"\\n          relative w-full bg-white border rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-pointer\\n          focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\\n          \".concat(error?'border-red-300 focus:ring-red-500 focus:border-red-500':'border-gray-300',\"\\n          \").concat(disabled?'bg-gray-50 cursor-not-allowed':'hover:border-gray-400',\"\\n        \"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:selectedCountry?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg mr-3\",children:selectedCountry.flag}),/*#__PURE__*/_jsx(\"span\",{className:\"block truncate text-gray-900\",children:selectedCountry.name})]}):/*#__PURE__*/_jsx(\"span\",{className:\"block truncate text-gray-500\",children:placeholder})}),/*#__PURE__*/_jsx(\"span\",{className:\"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none\",children:/*#__PURE__*/_jsx(ChevronDownIcon,{className:\"h-5 w-5 text-gray-400 transition-transform duration-200 \".concat(isOpen?'rotate-180':'')})})]}),isOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute z-50 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-2 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(SearchIcon,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{ref:searchInputRef,type:\"text\",placeholder:\"Search countries...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),onKeyDown:handleKeyDown,className:\"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-48 overflow-auto\",children:filteredCountries.length>0?filteredCountries.map(country=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleSelect(country),className:\"\\n                    w-full text-left px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 hover:text-indigo-900\\n                    \".concat((selectedCountry===null||selectedCountry===void 0?void 0:selectedCountry.code)===country.code?'bg-indigo-100 text-indigo-900':'text-gray-900',\"\\n                  \"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg mr-3\",children:country.flag}),/*#__PURE__*/_jsx(\"span\",{className:\"block truncate\",children:country.name})]})},country.code)):/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-2 text-sm text-gray-500\",children:\"No countries found\"})})]})]});};export default CountrySelect;","map":{"version":3,"names":["React","useState","useRef","useEffect","ChevronDownIcon","SearchIcon","countries","getCountryByCode","getCountryByName","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","CountrySelect","_ref","value","onChange","placeholder","className","disabled","error","isOpen","setIsOpen","searchTerm","setSearchTerm","filteredCountries","setFilteredCountries","dropdownRef","searchInputRef","selectedCountry","trim","filtered","filter","country","name","toLowerCase","includes","code","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","focus","handleToggle","handleSelect","handleKeyDown","key","preventDefault","length","concat","ref","children","type","onClick","flag","e","onKeyDown","map"],"sources":["/home/alikibret/Project/Adds/Bolt/New/frontend/src/components/ui/CountrySelect.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { ChevronDownIcon, SearchIcon } from '@heroicons/react/outline';\nimport { countries, getCountryByCode, getCountryByName } from '../../data/countries';\n\nconst CountrySelect = ({ \n  value, \n  onChange, \n  placeholder = \"Select a country...\", \n  className = \"\",\n  disabled = false,\n  error = false \n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filteredCountries, setFilteredCountries] = useState(countries);\n  const dropdownRef = useRef(null);\n  const searchInputRef = useRef(null);\n\n  const selectedCountry = value ? getCountryByName(value) : null;\n\n  // Filter countries based on search term\n  useEffect(() => {\n    if (searchTerm.trim() === '') {\n      setFilteredCountries(countries);\n    } else {\n      const filtered = countries.filter(country =>\n        country.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        country.code.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n      setFilteredCountries(filtered);\n    }\n  }, [searchTerm]);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setIsOpen(false);\n        setSearchTerm('');\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  // Focus search input when dropdown opens\n  useEffect(() => {\n    if (isOpen && searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  }, [isOpen]);\n\n  const handleToggle = () => {\n    if (!disabled) {\n      setIsOpen(!isOpen);\n      setSearchTerm('');\n    }\n  };\n\n  const handleSelect = (country) => {\n    onChange(country.name);\n    setIsOpen(false);\n    setSearchTerm('');\n  };\n\n  const handleKeyDown = (event) => {\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      if (filteredCountries.length > 0) {\n        handleSelect(filteredCountries[0]);\n      }\n    } else if (event.key === 'Escape') {\n      setIsOpen(false);\n      setSearchTerm('');\n    }\n  };\n\n  return (\n    <div className={`relative ${className}`} ref={dropdownRef}>\n      {/* Trigger Button */}\n      <button\n        type=\"button\"\n        onClick={handleToggle}\n        disabled={disabled}\n        className={`\n          relative w-full bg-white border rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-pointer\n          focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\n          ${error ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : 'border-gray-300'}\n          ${disabled ? 'bg-gray-50 cursor-not-allowed' : 'hover:border-gray-400'}\n        `}\n      >\n        <div className=\"flex items-center\">\n          {selectedCountry ? (\n            <>\n              <span className=\"text-lg mr-3\">{selectedCountry.flag}</span>\n              <span className=\"block truncate text-gray-900\">{selectedCountry.name}</span>\n            </>\n          ) : (\n            <span className=\"block truncate text-gray-500\">{placeholder}</span>\n          )}\n        </div>\n        <span className=\"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none\">\n          <ChevronDownIcon \n            className={`h-5 w-5 text-gray-400 transition-transform duration-200 ${\n              isOpen ? 'rotate-180' : ''\n            }`} \n          />\n        </span>\n      </button>\n\n      {/* Dropdown Menu */}\n      {isOpen && (\n        <div className=\"absolute z-50 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none\">\n          {/* Search Input */}\n          <div className=\"px-3 py-2 border-b border-gray-200\">\n            <div className=\"relative\">\n              <SearchIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n              <input\n                ref={searchInputRef}\n                type=\"text\"\n                placeholder=\"Search countries...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                onKeyDown={handleKeyDown}\n                className=\"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm\"\n              />\n            </div>\n          </div>\n\n          {/* Country List */}\n          <div className=\"max-h-48 overflow-auto\">\n            {filteredCountries.length > 0 ? (\n              filteredCountries.map((country) => (\n                <button\n                  key={country.code}\n                  type=\"button\"\n                  onClick={() => handleSelect(country)}\n                  className={`\n                    w-full text-left px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 hover:text-indigo-900\n                    ${selectedCountry?.code === country.code ? 'bg-indigo-100 text-indigo-900' : 'text-gray-900'}\n                  `}\n                >\n                  <div className=\"flex items-center\">\n                    <span className=\"text-lg mr-3\">{country.flag}</span>\n                    <span className=\"block truncate\">{country.name}</span>\n                  </div>\n                </button>\n              ))\n            ) : (\n              <div className=\"px-3 py-2 text-sm text-gray-500\">\n                No countries found\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CountrySelect;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}